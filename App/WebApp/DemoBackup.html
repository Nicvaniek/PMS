<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
    <title>Property Investor</title>
    <!-- CSS  -->
    <link rel="stylesheet" href="../css/sweetalert.css">
    <link href="../css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection" />
    <link href="../css/inputColor.css" type="text/css" rel="stylesheet" media="screen,projection" />
    <link rel="stylesheet" href="../css/font-awesome/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- JS  -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="../js/fcsaNumber.js"></script>
    <script src="../js/sweetalert.min.js"></script>
    <script type="text/javascript" src="../js/script.js"></script>
</head>
<style type="text/css">
.input-field div.error {
    position: relative;
    top: -1rem;
    left: 0rem;
    font-size: 0.8rem;
    color: #FF4081;
    -webkit-transform: translateY(0%);
    -ms-transform: translateY(0%);
    -o-transform: translateY(0%);
    transform: translateY(0%);
}

.input-field label.active {
    width: 100%;
}

header,
main,
footer {
    padding-left: 10%;
}

@media only screen and (max-width: 992px) {
    header,
    main,
    footer {
        padding-left: 0;
    }
}

body {
    display: flex;
    min-height: 100vh;
    flex-direction: column;
}

main {
    flex: 1 0 auto;
}
</style>

<body class="grey lighten-5" ng-app="propertyInvestor" ng-controller="propertyController">
    <header class="">
        <nav class="top-nav nav-extended red darken-2 text-white">
            <div class="container">
                <a href="#" class="brand-logo">Property Investor</a>
                <a href="#" data-activates="slide-out" class="button-collapse"><i class="material-icons">menu</i></a>
                <br>
                <ul id="tabs-swipe-demo" class="tabs tabs-transparent tabs-fixed-width center">
                    <li class="tab"><a href="#dashboardTab">Dashboard</a></li>
                    <li class="tab"><a href="#propertyInformationTab">Property Information</a></li>
                    <li class="tab"><a href="#expensesTab">Expenses</a></li>
                    <li class="tab"><a href="#renovationsTab">Renovations</a></li>
                    <li class="tab"><a href="#salesCostsTab">Sales Costs</a></li>
                    <li class="tab"><a href="#rentalIncomeTab">Rental</a></li>
                </ul>
            </div>
        </nav>
        <!-- Side navbar -->
        <ul id="slide-out" class="side-nav fixed grey darken-1">
            <li>
                <div class="userView">
                    <div class="background">
                        <img src="">
                    </div>
                    <a href="#!user"><img class="circle" src="../img/default-user-image.jpg"></a>
                    <a href="#!name"><span class="white-text name">Kyle Erwin</span></a>
                    <a href="#!email"><span class="white-text email">kyle.erwin24@gmail.com</span></a>
                </div>
            </li>
            <li><a href="#!"><i class="fa fa-home fa-2x white-text" aria-hidden="true"></i><span class="white-text">Home owner</span></a></li>
            <li><a href="#!"><i class="fa fa-book fa-2x white-text" aria-hidden="true"></i><span id="numberOfpropertiesNavBar"class="white-text">0 Properties</span></a></li>
            <hr>
            <div ng-repeat="propertyDetail in propertyDetails">
                <li><a href="#!" ng-click="selectPropertyToView(propertyDetail.houseNumber)"><i class="fa fa-home fa-2x white-text" aria-hidden="true"></i><span class="white-text">{{propertyDetail.houseNumber}}</span></a></li>
                </button>
            </div>
            <li>
                <a class="waves-effect waves-light" href="#propertyInformationTab" ng-click="toggleAddProprty()"><span class="white-text">Add Property</span></a></li>
            <li>
                <div class="divider"></div>
            </li>
            <li><a class="subheader"><span class="white-text">Settings</span></a></li>
            <li><a href="#modal2"><i class="fa fa-shopping-bag fa-2x white-text" aria-hidden="true"></i><span class="white-text">Package</span></a></li>
            <li><a href="#modal1"><i class="fa fa-info-circle fa-2x white-text" aria-hidden="true"></i><span class="white-text">My info</span></a></li>
            <li><a href="#modal1"><i class="fa fa-power-off fa-2x white-text" aria-hidden="true"></i><span class="white-text">Log out</span></a></li>
        </ul>
    </header>
    <main>
        <!-- Dasboard tab -->
        <div id="dashboardTab" class="col m12">
        </div>
        <!-- Property information tab -->
        <div id="propertyInformationTab" class="col m12">
            <!-- Adding property -->
            <div ng-show="addPropertyForm" class="container">
                <form ng-submit="addNewProperty(propertyDetails)" enctype="multipart/form-data">
                    <div class='row'>
                        <h4>Add Property</h4>
                        <hr>
                        <div class='col m12'>
                            <h5>Address</h5>
                            <hr>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col m5 s12 offset-m1">
                            <i class="material-icons prefix">mode_edit</i>
                            <input type="text" maxlength="30" class="validate" ng-model="propertyDetails.houseNumber">
                            <label>Street Name and Number</label>
                        </div>
                        <div class="input-field col m5 s12">
                            <i class="material-icons prefix">mode_edit</i>
                            <input type="text" maxlength="30" class="validate" ng-model="propertyDetails.suburb">
                            <label>Suburb</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col m7 s12 offset-m1">
                            <i class="material-icons prefix">mode_edit</i>
                            <input type="text" maxlength="30" id="provincesInput" class="autocomplete validate" ng-model="propertyDetails.province">
                            <label>Province</label>
                        </div>
                        <div class="input-field col m3 s12">
                            <i class="material-icons prefix">mode_edit</i>
                            <input type="number" min="0" class="validate" ng-model="propertyDetails.areaPostalCode">
                            <label>Area Postal Code</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col m7 s12 offset-m1">
                            <i class="material-icons prefix">mode_edit</i>
                            <input type="text" maxlength="30" class="validate" ng-model="propertyDetails.complexName">
                            <label>Complex Name</label>
                        </div>
                        <div class="input-field col m3 s12">
                            <i class="material-icons prefix">mode_edit</i>
                            <input type="text" maxlength="10" class="validate" ng-model="propertyDetails.complexNumber">
                            <label>Complex Number</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col m3 s12 offset-m1">
                            <i class="material-icons prefix">mode_edit</i>
                            <input type="text" maxlength="10" class="validate" ng-model="propertyDetails.standSize">
                            <label>Stand Size (m^2)</label>
                        </div>
                        <div class="input-field col m3 s12 ">
                            <i class="material-icons prefix">mode_edit</i>
                            <input type="text" maxlength="10" class="validate" ng-model="propertyDetails.standSizeCoverd">
                            <label>Covered Size (m^2)</label>
                        </div>
                        <div class="input-field col m3 s12 ">
                            <i class="material-icons prefix">mode_edit</i>
                            <input type="text" maxlength="10" class="validate" ng-model="propertyDetails.standSizeUncovered">
                            <label>Uncovered Size (m^2)</label>
                        </div>
                    </div>
                    <h5>Acquisition Information</h5>
                    <hr>
                    <div class="row">
                        <div class="input-field col m5 s12 offset-m1">
                            <i class="material-icons prefix">shopping_cart</i>
                            <input format="currency" type="text" maxlength="10" max="10000000" ng-model="propertyDetails.purchaseAmount">
                            <label>Purchase Amount</label>
                        </div>
                        <div class="input-field col m5 s12">
                            <i class="material-icons prefix">shopping_cart</i>
                            <input format="currency" type="text" maxlength="10" class="validate" ng-model="propertyDetails.auctionCost">
                            <label>Auction Cost</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col m5 s12 offset-m1">
                            <i class="material-icons prefix">shopping_cart</i>
                            <input format="currency" type="text" maxlength="10" class="validate" ng-model="propertyDetails.transferFees">
                            <label>Attorneys Fees - Transfer</label>
                        </div>
                        <div class="file-field input-field col m5">
                            <div class="btn red darken-2 waves-effect waves-light">
                                <span>Upload File</span>
                                <input type="file">
                            </div>
                            <div class="file-path-wrapper">
                                <input class="file-path validate" type="text" placeholder="Attorney fees – Transfer">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col m5 s12 offset-m1">
                            <i class="material-icons prefix">shopping_cart</i>
                            <input format="currency" type="text" maxlength="10" class="validate" ng-model="propertyDetails.transferDuty">
                            <label>Transfer Duty</label>
                        </div>
                        <div class="file-field input-field col m5">
                            <div class="btn red darken-2 waves-effect waves-light">
                                <span>Upload File</span>
                                <input type="file">
                            </div>
                            <div class="file-path-wrapper">
                                <input class="file-path validate" type="text" placeholder="Transfer Duty">
                            </div>
                        </div>
                    </div>
                    <h5>Bond Information</h5>
                    <hr>
                    <div class="row">
                        <div class="input-field col m5 s12 offset-m1">
                            <i class="material-icons prefix">shopping_cart</i>
                            <input type="text" maxlength="30" class="validate" ng-model="propertyDetails.bankName">
                            <label>Bank Name</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col m5 s12 offset-m1">
                            <i class="material-icons prefix">shopping_cart</i>
                            <input type="text" maxlength="10" class="validate" ng-model="propertyDetails.accountNumber" min="0">
                            <label>Account Number</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col m5 s12 offset-m1">
                            <i class="material-icons prefix">shopping_cart</i>
                            <input format="currency" type="text" maxlength="10" class="validate" ng-model="propertyDetails.depositAmount">
                            <label>Deposit Amount</label>
                        </div>
                        <div class="input-field col m5 s12 ">
                            <i class="material-icons prefix">shopping_cart</i>
                            <input format="currency" type="text" maxlength="10" class="validate" ng-model="propertyDetails.bondAmount" min="0">
                            <label>Bond Amount</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="file-field input-field col m5 offset-m1">
                            <div class="btn red darken-2 waves-effect waves-light">
                                <span>Upload File</span>
                                <input type="file">
                            </div>
                            <div class="file-path-wrapper">
                                <input class="file-path validate" type="text" placeholder="Attorney Fees – Bond Registration">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col m5 s12 offset-m1">
                            <i class="material-icons prefix">mode_edit</i>
                            <input type="number" min="0" class="validate" ng-model="propertyDetails.period">
                            <label>Period (Months)</label>
                        </div>
                        <div class="input-field col m5 s12">
                            <i class="material-icons prefix">mode_edit</i>
                            <input type="number" min="0" class="validate" ng-model="propertyDetails.interesetRate">
                            <label>Interest Rate</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col m5 s12 offset-m1">
                            <i class="material-icons prefix">shopping_cart</i>
                            <input format="currency" type="text" maxlength="10" class="validate" ng-model="propertyDetails.monthlyInstallments">
                            <label>Monthly Installments</label>
                        </div>
                        <div class="input-field col m5 s12">
                            <i class="material-icons prefix">shopping_cart</i>
                            <input format="currency" type="text" maxlength="10" class="validate" ng-model="propertyDetails.bondInitiationFee">
                            <label>Bond Initiation Fee</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col m5 s12 offset-m1">
                            <i class="material-icons prefix">mode_edit</i>
                            <input format="currency" type="text" maxlength="10" class="validate" ng-model="propertyDetails.bondRegistration">
                            <label>Attorneys Fees - Bond Registration</label>
                        </div>
                        <div class="file-field input-field col m5">
                            <div class="btn red darken-2 waves-effect waves-light">
                                <span>Upload File</span>
                                <input type="file">
                            </div>
                            <div class="file-path-wrapper">
                                <input class="file-path validate" type="text" placeholder="Attorney Fees – Bond Registration">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col m4 offset-m8">
                            <button class="btn grey darken-2 waves-effect waves-light" type="button" ng-click="toggleAddProprty()">Cancel</button>
                            <button class="btn red darken-2 waves-effect waves-light" type="sumbit" ng-click="">Add</button>
                        </div>
                    </div>
                </form>
            </div>
            <div ng-hide="addPropertyForm" class="container">
                <div ng-show="!propertyDetails.length">
                    <div class="row">
                        <br>
                        <h4>Selected Property</h4>
                        <hr>
                    </div>
                    <p>You have no properties.</p>
                    <hr>
                </div>
                <div class="row" ng-hide="!propertyDetails.length">
                    <div ng-show="selectedProperty == 'EMPTY'">
                        <div class="row">
                            <br>
                            <h4>Selected Property</h4>
                            <hr>
                        </div>
                        <p>You have not selected a property.</p>
                        <hr>
                    </div>
                    <!-- Property details -->
                    <div ng-hide="selectedProperty == 'EMPTY' | editProperty">
                        <div ng-show="viewProperty">
                            <div ng-repeat="propertyDetail in propertyDetails | filter:{ houseNumber: selectedProperty }">
                                <div class="row">
                                    <br>
                                    <h4>{{propertyDetail.houseNumber}}</h4>
                                    <hr>
                                    <div class="col m12 s12">
                                        <h4>Address</h4>
                                        <hr>
                                    </div>
                                    <div class="col m12 s12">
                                        <p>Address: {{propertyDetail.houseNumber + ", " + propertyDetail.suburb + ", " + propertyDetail.province}}</p>
                                    </div>
                                    <div class="col m12 s12">
                                        <p>Area Postal Code: {{propertyDetail.areaPostalCode}}</p>
                                    </div>
                                    <div class="col m12 s12">
                                        <p>Complex Name: {{propertyDetail.complexName}}</p>
                                    </div>
                                    <div class="col m12 s12">
                                        <p>Complex Number: {{propertyDetail.complexNumber}}</p>
                                    </div>
                                    <div class="col m12 s12">
                                        <p>Size: {{propertyDetail.standSize}} m^2</p>
                                    </div>
                                    <div class="col m12 s12">
                                        <p>Covered Area: {{propertyDetail.standSizeCoverd}} m^2</p>
                                    </div>
                                    <div class="col m12 s12">
                                        <p>Uncovered Area: {{propertyDetail.standSizeUncovered}} m^2</p>
                                    </div>
                                    <div class="col m12 s12">
                                        <h4>Acquisition Information</h4>
                                        <hr>
                                    </div>
                                    <div class="col m12 s12">
                                        <p>Purchase Amount: <span id="currency-custom">{{propertyDetail.purchaseAmount | currency:"R"}}</span></p>
                                    </div>
                                    <div class="col m12 s12">
                                        <p>Auction Cost: <span id="currency-custom">{{propertyDetail.auctionCost | currency:"R"}}</span></p>
                                    </div>
                                    <div class="col m12 s12">
                                        <p>Attorneys Fees - Transfer: <span id="currency-custom">{{propertyDetail.transferFees | currency:"R"}}</span></p>
                                    </div>
                                    <div class="col m12 s12">
                                        <p>Transfer Duty: <span id="currency-custom">{{propertyDetail.transferDuty | currency:"R"}}</span></p>
                                    </div>
                                    <div class="col m12 s12">
                                        <h4>Bond Information</h4>
                                        <hr>
                                    </div>
                                    <div class="col m12 s12">
                                        <p>Deposit: <span id="currency-custom">{{propertyDetail.depositAmount | currency:"R"}}</span></p>
                                    </div>
                                    <div class="col m12 s12">
                                        <p>Bond: <span id="currency-custom">{{propertyDetail.bondAmount | currency:"R"}}</span></p>
                                    </div>
                                    <div class="col m12 s12">
                                        <p>Period: {{propertyDetail.period}}</p>
                                    </div>
                                    <div class="col m12 s12">
                                        <p>Monthly Installments: <span id="currency-custom">{{propertyDetail.monthlyInstallments | currency:"R"}}</span></p>
                                    </div>
                                    <div class="col m12 s12">
                                        <p>Intereset Rate: {{propertyDetail.interesetRate}}%</p>
                                    </div>
                                    <div class="col m12 s12">
                                        <p>Attorneys Fees - Bond Registration: <span id="currency-custom">{{propertyDetail.bondRegistration}}</span></p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col m4 offset-m8">
                                        <button class="btn grey darken-2 waves-effect waves-light" ng-click="delete()">Delete</button>
                                        <button class="btn red darken-2 waves-effect waves-light" ng-click="editPropertyF()">Edit</button>
                                        <button class="btn red darken-2 waves-effect waves-light" ng-click="">Download</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Edit property -->
                    <div ng-show="editProperty">
                        <div ng-repeat="propertyDetail in propertyDetails | filter:{ houseNumber: selectedProperty }">
                            <form ng-submit="editPropertyConfirm(propertyDetails)" enctype="multipart/form-data">
                                <div class='row'>
                                    <h4>Edit Property</h4>
                                    <hr>
                                    <div class='col m12'>
                                        <h5>Address</h5>
                                        <hr>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="input-field col m5 s12 offset-m1">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input type="text" maxlength="30" class="validate" value="{{propertyDetail.houseNumber}}" ng-model="propertyDetails.houseNumber">
                                        <label class="active">Street Name and Number</label>
                                    </div>
                                    <div class="input-field col m5 s12">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input type="text" maxlength="30" class="validate" value="{{propertyDetail.suburb}}" ng-model="propertyDetails.suburb">
                                        <label class="active">Suburb</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="input-field col m7 s12 offset-m1">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input type="text" maxlength="30" id="provincesInput" class="autocomplete validate" value="{{propertyDetail.province}}" ng-model="propertyDetails.province">
                                        <label class="active">Province</label>
                                    </div>
                                    <div class="input-field col m3 s12">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input type="number" min="0" class="validate" value="{{propertyDetail.areaPostalCode}}" ng-model="propertyDetails.areaPostalCode">
                                        <label class="active">Area Postal Code</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="input-field col m7 s12 offset-m1">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input type="text" maxlength="30" class="validate" value="{{propertyDetail.complexName}}" ng-model="propertyDetails.complexName">
                                        <label class="active">Complex Name</label>
                                    </div>
                                    <div class="input-field col m3 s12">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input type="text" maxlength="10" class="validate" value="{{propertyDetail.complexNumber}}" ng-model="propertyDetails.complexNumber">
                                        <label class="active">Complex Number</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="input-field col m3 s12 offset-m1">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input type="text" maxlength="10" class="validate" value="{{propertyDetail.standSi}}" ng-model="propertyDetails.standSize">
                                        <label class="active">Stand Size (m^2)</label>
                                    </div>
                                    <div class="input-field col m3 s12 ">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input type="text" maxlength="10" class="validate" value="{{propertyDetail.standSizeCoverd}}" ng-model="propertyDetails.standSizeCoverd">
                                        <label class="active">Covered Size (m^2)</label>
                                    </div>
                                    <div class="input-field col m3 s12 ">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input type="text" maxlength="10" class="validate" value="{{propertyDetail.standSizeUncovered}}" ng-model="propertyDetails.standSizeUncovered">
                                        <label class="active">Uncovered Size (m^2)</label>
                                    </div>
                                </div>
                                <h5>Acquisition Information</h5>
                                <hr>
                                <div class="row">
                                    <div class="input-field col m5 s12 offset-m1">
                                        <i class="material-icons prefix">shopping_cart</i>
                                        <input format="currency" type="text" maxlength="10" max="10000000" value="{{propertyDetail.purchaseAmount}}" ng-model="propertyDetails.purchaseAmount">
                                        <label class="active">Purchase Amount</label>
                                    </div>
                                    <div class="input-field col m5 s12">
                                        <i class="material-icons prefix">shopping_cart</i>
                                        <input format="currency" type="text" maxlength="10" class="validate" value="{{propertyDetail.auctionCost}}" ng-model="propertyDetails.auctionCost">
                                        <label class="active">Auction Cost</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="input-field col m5 s12 offset-m1">
                                        <i class="material-icons prefix">shopping_cart</i>
                                        <input format="currency" type="text" maxlength="10" class="validate" value="{{propertyDetail.transferFees}}" ng-model="propertyDetails.transferFees">
                                        <label class="active">Attorneys Fees - Transfer</label>
                                    </div>
                                    <div class="file-field input-field col m5">
                                        <div class="btn red darken-2 waves-effect waves-light">
                                            <span>Upload File</span>
                                            <input type="file">
                                        </div>
                                        <div class="file-path-wrapper">
                                            <input class="file-path validate" type="text" placeholder="Attorney fees – Transfer">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="input-field col m5 s12 offset-m1">
                                        <i class="material-icons prefix">shopping_cart</i>
                                        <input format="currency" type="text" maxlength="10" class="validate" value="{{propertyDetail.transferDuty}}" ng-model="propertyDetails.transferDuty">
                                        <label class="active">Transfer Duty</label>
                                    </div>
                                    <div class="file-field input-field col m5">
                                        <div class="btn red darken-2 waves-effect waves-light">
                                            <span>Upload File</span>
                                            <input type="file">
                                        </div>
                                        <div class="file-path-wrapper">
                                            <input class="file-path validate" type="text" placeholder="Transfer Duty">
                                        </div>
                                    </div>
                                </div>
                                <h5>Bond Information</h5>
                                <hr>
                                <div class="row">
                                    <div class="input-field col m5 s12 offset-m1">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input type="text" maxlength="30" class="validate" value="{{propertyDetail.bankName}}" ng-model="propertyDetails.bankName">
                                        <label class="active">Bank Name</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="input-field col m5 s12 offset-m1">
                                        <i class="material-icons prefix">shopping_cart</i>
                                        <input type="text" maxlength="10" class="validate" value="{{propertyDetail.accountNumber}}" ng-model="propertyDetails.accountNumber">
                                        <label class="active">Account Number</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="input-field col m5 s12 offset-m1">
                                        <i class="material-icons prefix">shopping_cart</i>
                                        <input format="currency" type="text" maxlength="10" class="validate" value="{{propertyDetail.depositAmount}}" ng-model="propertyDetails.depositAmount">
                                        <label class="active">Deposit Amount</label>
                                    </div>
                                    <div class="input-field col m5 s12 ">
                                        <i class="material-icons prefix">shopping_cart</i>
                                        <input format="currency" type="text" maxlength="10" class="validate" value="{{propertyDetail.bondAmount}}" ng-model="propertyDetails.bondAmount" min="0">
                                        <label class="active">Bond Amount</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="file-field input-field col m5 offset-m1">
                                        <div class="btn red darken-2 waves-effect waves-light">
                                            <span>Upload File</span>
                                            <input type="file">
                                        </div>
                                        <div class="file-path-wrapper">
                                            <input class="file-path validate" type="text" placeholder="Attorney Fees – Bond Registration">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="input-field col m5 s12 offset-m1">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input type="text" min="0" class="validate" value="{{propertyDetail.period}}" ng-model="propertyDetails.period">
                                        <label class="active">Period (Months)</label>
                                    </div>
                                    <div class="input-field col m5 s12">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input type="text" min="0" class="validate" value="{{propertyDetail.interesetRat}}" ng-model="propertyDetails.interesetRate">
                                        <label class="active">Interest Rate</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="input-field col m5 s12 offset-m1">
                                        <i class="material-icons prefix">shopping_cart</i>
                                        <input format="currency" type="text" maxlength="10" class="validate" value="{{propertyDetail.monthlyInstallments}}" ng-model="propertyDetails.monthlyInstallments">
                                        <label class="active">Monthly Installments</label>
                                    </div>
                                    <div class="input-field col m5 s12">
                                        <i class="material-icons prefix">shopping_cart</i>
                                        <input format="currency" type="text" maxlength="10" class="validate" value="{{propertyDetail.monthlyInstallments}}" ng-model="propertyDetails.bondInitiationFee">
                                        <label class="active">Bond Initiation Fee</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="input-field col m5 s12 offset-m1">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input format="currency" type="text" maxlength="10" class="validate" value="{{propertyDetail.bondRegistration}}" ng-model="propertyDetails.bondRegistration">
                                        <label class="active">Attorneys Fees - Bond Registration</label>
                                    </div>
                                    <div class="file-field input-field col m5">
                                        <div class="btn red darken-2 waves-effect waves-light">
                                            <span>Upload File</span>
                                            <input type="file">
                                        </div>
                                        <div class="file-path-wrapper">
                                            <input class="file-path validate" type="text" placeholder="Attorney Fees – Bond Registration">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col m4 offset-m8">
                                        <button class="btn grey darken-2 waves-effect waves-light" type="button" ng-click="toggleEditProprty()">Cancel</button>
                                        <button class="btn red darken-2 waves-effect waves-light" type="sumbit" ng-click="">Confirm</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Expenses Tab -->
        <div id="expensesTab" class="col m12">
            <div class='container'>
                <div ng-show="!propertyDetails.length">
                    <div class="row">
                        <br>
                        <h4>Selected Property</h4>
                        <hr>
                    </div>
                    <p>You have no properties.</p>
                    <hr>
                </div>
                <div class="row" ng-hide="!propertyDetails.length">
                    <div ng-show="selectedProperty == 'EMPTY'">
                        <div class="row">
                            <br>
                            <h4>Selected Property</h4>
                            <hr>
                        </div>
                        <p>You have not selected a property.</p>
                        <hr>
                    </div>
                    <div ng-hide="selectedProperty == 'EMPTY'">
                        <!-- Expenses table -->
                        <div class="row" ng-repeat="propertyDetail in propertyDetails | filter:{ houseNumber: selectedProperty }">
                            <br>
                            <div class="col m6">
                                <h4>{{propertyDetail.houseNumber}} - Expenses</h4>
                            </div>
                            <div class="col m6">
                                <a style="cursor:pointer; padding-right: 40px; padding-left: 10px; padding-top: 15px;" class="secondary-content"><i class="red-text text-darken-2 material-icons" ng-click="deleteExpense()">delete</i></a>
                                <a style="cursor:pointer; padding-right: 20px; padding-left: 10px; padding-top: 15px;" class="secondary-content"><i  class="black-text material-icons">system_update_alt</i></a>
                                <a style="cursor:pointer; padding-right: 20px; padding-left: 10px; padding-top: 15px;" class="secondary-content"><i class="black-text material-icons" ng-click="selectExpenseToEdit()" >mode_edit</i></a>
                                <a style="cursor:pointer; padding-right: 20px; padding-left: 10px; padding-top: 15px;" class="secondary-content"><i class="black-text material-icons" ng-click="repeatExpense()">settings_backup_restore</i></a>
                                <a style="cursor:pointer; padding-right: 20px; padding-left: 10px; padding-top: 15px;" class="secondary-content"><i class="black-text material-icons" ng-click="toggleAddExpense()" >playlist_add</i></a>
                            </div>
                        </div>
                        <div class="row">
                            <hr>
                        </div>
                        <ul class="collapsible popout" data-collapsible="accordion">
                            <li>
                                <div class="collapsible-header">
                                    <div class="row">
                                        <div class="col m12">
                                            <h5>All Expenses</h5>
                                            <h6>Total Cost: {{getTotalExpenseCost("")}}</h6>
                                        </div>
                                    </div>
                                </div>
                                <div class="collapsible-body">
                                    <div class="row">
                                        <div class="col m12">
                                            <table class="highlight">
                                                <thead>
                                                    <tr>
                                                        <th>Description</th>
                                                        <th>Supplier</th>
                                                        <th>Invoice No</th>
                                                        <th>Invoice Date</th>
                                                        <th>Amount Paid</th>
                                                        <th>Quantity</th>
                                                        <th>Total Paid</th>
                                                        <th>Invoice Attached</th>
                                                        <th>Select</th>
                                                    </tr>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="expenseDetail in expenseDetails | filter:{ propertyID: selectedProperty }">
                                                        <td>{{expenseDetail.description}}</td>
                                                        <td>{{expenseDetail.paidTo}}</td>
                                                        <td>{{expenseDetail.invoiceNumber}}</td>
                                                        <td>{{expenseDetail.invoiceDate}}</td>
                                                        <td><span id="currency-custom">{{expenseDetail.cost| currency:"R"}}</span></td>
                                                        <td>{{expenseDetail.quantity}}</td>
                                                        <td><span id="currency-custom">{{expenseDetail.quantity * expenseDetail.cost | currency:"R"}}</span></td>
                                                        <td>Yes</td>
                                                        <td>
                                                            <div>
                                                                <input class="with-gap" name="group2" id="{{expenseDetail.description}}radio" type="radio">
                                                                <label for="{{expenseDetail.description}}radio"></label>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li ng-repeat="expenseGroup in expenseGroups | filter:{ propertyID: selectedProperty }">
                                <div class="collapsible-header">
                                    <div class="row">
                                        <div class="col m12">
                                            <h5>{{expenseGroup.groupName}}</h5>
                                            <data ng-init="nameG = expenseGroup.groupName + ''" />
                                            <h6>Total Cost: {{getTotalExpenseCost(nameG)}}</h6>
                                        </div>
                                    </div>
                                </div>
                                <div class="collapsible-body">
                                    <div class="row">
                                        <div class="col m12">
                                            <table class="highlight">
                                                <thead>
                                                    <tr>
                                                        <th>Description</th>
                                                        <th>Supplier</th>
                                                        <th>Invoice No</th>
                                                        <th>Invoice Date</th>
                                                        <th>Amount Paid</th>
                                                        <th>Quantity</th>
                                                        <th>Total Paid</th>
                                                        <th>Invoice Attached</th>
                                                        <th>Select</th>
                                                    </tr>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="expenseDetail in expenseDetails | filter:{ propertyID: selectedProperty, groupName: nameG }">
                                                        <td>{{expenseDetail.description}}</td>
                                                        <td>{{expenseDetail.paidTo}}</td>
                                                        <td>{{expenseDetail.invoiceNumber}}</td>
                                                        <td>{{expenseDetail.invoiceDate}}</td>
                                                        <td><span id="currency-custom">{{expenseDetail.cost| currency:"R"}}</span></td>
                                                        <td>{{expenseDetail.quantity}}</td>
                                                        <td><span id="currency-custom">{{expenseDetail.quantity * expenseDetail.cost | currency:"R"}}</span></td>
                                                        <td>Yes</td>
                                                        <td>
                                                            <div>
                                                                <input class="with-gap" name="group3"="{{expenseDetail.description}}radio" type="radio">
                                                                <label for="{{expenseDetail.description}}radio"></label>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                        <div class="row">
                            <br>
                        </div>
                        <div ng-show="showAddExpense" class="row">
                            <h4>Add Expense</h4>
                            <hr>
                            <div class="col m12">
                                <h5>Details</h5>
                                <hr>
                            </div>
                            <form ng-submit="addNewExpense(expenseDetails)" enctype="multipart/form-data">
                                <div class="row">
                                    <div class="col m10 offset-m1">
                                        <p>Note! The format for a single expense is "Expense-name cost quanity" seperated by spaces. For expenses that with spaces in the name please use hyphens.</p>
                                        <p>To add multiple expenses, repeat this process on a new line. Click quick insert and select some expenses to see how this is done.</p>
                                    </div>
                                    <div class="input-field col m10 offset-m1">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input type="text" ng-model="expenseDetails.groupName" required>
                                        <label>Expenses Group Name - ie General</label>
                                    </div>
                                    <div class="input-field col m10 offset-m1">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input type="text" ng-model="expenseDetails.paidTo" required>
                                        <label>Paid To</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="input-field col m7 offset-m1">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <textarea id="expenseInformationTextarea" class="materialize-textarea" ng-model="expenseDetails.expenses" required></textarea>
                                        <label id="expenseInformationLabel">Expense</label>
                                    </div>
                                    <div class="input-field col m3">
                                        <a class="btn red darken-2 waves-effect waves-light" href="#modal1">Quick Select Expenses</a>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="input-field col m5 offset-m1">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input id="datepickerExpense" type="date" class="datepicker" ng-model="expenseDetails.invoiceDate">
                                        <label>Invoice Date</label>
                                    </div>
                                    <div class="input-field col m5">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input type="number" ng-model="expenseDetails.invoiceNumber">
                                        <label>Invoice Number</label>
                                    </div>
                                    <div class="file-field input-field col m10 offset-m1">
                                        <div class="btn red darken-2">
                                            <span>Upload Invoice</span>
                                            <input type="file">
                                        </div>
                                        <div class="file-path-wrapper">
                                            <input class="file-path validate" type="text">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col m10">
                                    </div>
                                    <div class="col m2 s12">
                                        <button class="btn red darken-2 waves-effect waves-light" type="sumbit" ng-click="">Add</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <!-- Edit Expense -->
                        <div ng-show="showEditExpense">
                            <h4>Edit Expense</h4>
                            <hr>
                            <div class="col m12">
                                <h5>Details</h5>
                                <hr>
                            </div>
                            <form ng-submit="editExpense(expenseDetails)" enctype="multipart/form-data">
                                <div class="row">
                                    <div class="input-field col m10 offset-m1">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input id="editExpenseGroupName" type="text" required>
                                        <label class="active">Expenses Group Name - ie General</label>
                                    </div>
                                    <div class="input-field col m10 offset-m1">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input id="editExpensePaidTo" type="text" required>
                                        <label class="active">Paid To</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="input-field col m4 offset-m1">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input id="editExpenseDescription" type="text" required>
                                        <label class="active">Expense</label>
                                    </div>
                                    <div class="input-field col m3">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input id="editExpenseCost" type="text" required>
                                        <label class="active">Cost</label>
                                    </div>
                                    <div class="input-field col m3">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input id="editExpenseQuantity" type="text" required>
                                        <label class="active">Quantity</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="input-field col m5 offset-m1">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input id="editExpenseInvoiceDate" type="text" class="datepicker" >
                                        <label class="active">Invoice Date</label>
                                    </div>
                                    <div class="input-field col m5">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input type="number" ng-model="expenseDetails.invoiceNumber">
                                        <label class="active">Invoice Number</label>
                                    </div>
                                    <div class="file-field input-field col m10 offset-m1">
                                        <div class="btn red darken-2">
                                            <span>Upload Invoice</span>
                                            <input type="file">
                                        </div>
                                        <div class="file-path-wrapper">
                                            <input class="file-path validate" type="text">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col m4 offset-m8">
                                        <button class="btn grey darken-2 waves-effect waves-light" type="" ng-click="toggleEditxpense()">Cancel</button>
                                        <button class="btn red darken-2 waves-effect waves-light" type="sumbit" ng-click="">Edit</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal Structure -->
        <div id="modal1" class="modal">
            <div class="modal-content">
                <h4>Expenses</h4>
                <div class="row">
                    <div class="col m5 offset-m1">
                        <p>
                            <input type="checkbox" id="expenseCheckBox1" value="Electricity" />
                            <label for="expenseCheckBox1">Electricity </label>
                        </p>
                        <p>
                            <input type="checkbox" id="expenseCheckBox2" value="Water" />
                            <label for="expenseCheckBox2">Water</label>
                        </p>
                        <p>
                            <input type="checkbox" id="expenseCheckBox3" value="Sewer-Rates" />
                            <label for="expenseCheckBox3">Sewer-Rates</label>
                        </p>
                        <p>
                            <input type="checkbox" id="expenseCheckBox4" value="Maintenance" />
                            <label for="expenseCheckBox4">Maintenance</label>
                        </p>
                    </div>
                    <div class="col m5">
                        <p>
                            <input type="checkbox" id="expenseCheckBox5" value="House-Keeping" />
                            <label for="expenseCheckBox5">House-Keeping</label>
                        </p>
                        <p>
                            <input type="checkbox" id="expenseCheckBox6" value="Gardening" />
                            <label for="expenseCheckBox6">Gardening</label>
                        </p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <a href="#!" class="modal-action modal-close waves-effect waves-red darken 2 btn-flat" onClick="insertQuickExpenses()">Insert</a>
                <a href="#!" class="modal-action modal-close waves-effect waves-red darken 2 btn-flat">Cancel</a>
            </div>
        </div>
        <div id="renovationsTab" class="col m12">
            <div class='container'>
                <div ng-show="!propertyDetails.length">
                    <div class="row">
                        <br>
                        <h4>Selected Property</h4>
                        <hr>
                    </div>
                    <p>You have no properties.</p>
                    <hr>
                </div>
                <div class="row" ng-hide="!propertyDetails.length">
                    <div ng-show="selectedProperty == 'EMPTY'">
                        <div class="row">
                            <br>
                            <h4>Selected Property</h4>
                            <hr>
                        </div>
                        <p>You have not selected a property.</p>
                        <hr>
                    </div>
                    <div ng-hide="selectedProperty == 'EMPTY'">
                        <div ng-show="!renovationDetails.length">
                            <div class="row" ng-repeat="propertyDetail in propertyDetails | filter:{ houseNumber: selectedProperty }">
                                <br>
                                <h4>{{propertyDetail.houseNumber}} - Renovations</h4>
                                <hr>
                            </div>
                            <p>You have no renovations for this property.</p>
                            <hr>
                        </div>
                        <div ng-hide="!renovationDetails.length">
                            <!-- Renovations table -->
                            <div class="row" ng-repeat="propertyDetail in propertyDetails | filter:{ houseNumber: selectedProperty }">
                                <br>
                                <h4>{{propertyDetail.houseNumber}} - Renovations</h4>
                                <hr>
                            </div>
                            <div class="row">
                                <div class="col m12 hide-on-small-only">
                                    <a style="padding-right: 40px; padding-left: 10px; padding-top: 15px;" class="secondary-content"><i class="red-text text-darken-2 material-icons" ng-click="deleteRenovation()">delete</i></a>
                                    <a style="padding-right: 20px; padding-left: 10px; padding-top: 15px;" class="secondary-content"><i  class="black-text material-icons">system_update_alt</i></a>
                                    <a style="padding-right: 20px; padding-left: 10px; padding-top: 15px;" class="secondary-content"><i class="black-text material-icons">mode_edit</i></a>
                                </div>
                            </div>
                            <div class="row">
                                <table class="highlight">
                                    <thead>
                                        <tr>
                                            <th>Description</th>
                                            <th>Project</th>
                                            <th>Supplier</th>
                                            <th>Invoice Attached</th>
                                            <th>Invoice Date</th>
                                            <th>Amount Paid</th>
                                            <th>Quantity</th>
                                            <th>Total</th>
                                            <th>Select</th>
                                        </tr>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="renovationDetail in renovationDetails | filter:showrenovations">
                                            <td>{{renovationDetail.description}}</td>
                                            <td>{{renovationDetail.project}}</td>
                                            <td>{{renovationDetail.supplier}}</td>
                                            <td>Yes</td>
                                            <td>{{renovationDetail.invoiceDate}}</td>
                                            <td><span id="currency-custom">{{renovationDetail.cost| currency:"R"}}</span></td>
                                            <td>{{renovationDetail.quantity}}</td>
                                            <td><span id="currency-custom">{{renovationDetail.quantity * renovationDetail.cost | currency:"R"}}</span></td>
                                            <td>
                                                <div>
                                                    <input class="with-gap" name="group2" id="{{renovationDetail.description}}radio" type="radio">
                                                    <label for="{{renovationDetail.description}}radio"></label>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="row">
                            <br>
                        </div>
                        <div class="row">
                            <h4>Renovation Projects</h4>
                            <hr>
                            <div class="col m9 offset-m1">
                                <div class="row" ng-repeat="project in renovationProjectDetails | filter:{ propertyID: selectedProperty }">
                                    <div class="col m12">
                                        <h5>{{project.description}}</h5>
                                        <p>Total cost: </p>
                                        <br>
                                        <table class="highlight">
                                            <thead>
                                                <tr>
                                                    <th>Description</th>
                                                    <th>Supplier</th>
                                                    <th>Amount Paid</th>
                                                    <th>Quantity</th>
                                                    <th>Total</th>
                                                    <th>Recorded</th>
                                                </tr>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="renovationDetail in renovationDetails | filter: { propertyID: selectedProperty,  project: project.description }">
                                                    <td>{{renovationDetail.description}}</td>
                                                    <td>{{renovationDetail.supplier}}</td>
                                                    <td><span id="currency-custom">{{renovationDetail.cost| currency:"R"}}</span></td>
                                                    <td>{{renovationDetail.quantity}}</td>
                                                    <td><span id="currency-custom">{{renovationDetail.quantity * renovationDetail.cost | currency:"R"}}</span></td>
                                                    <td>No</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <br>
                                        <a ng-show="renovationProject == 'EMPTY' || renovationProject != project.description" class="btn red darken-2 waves-effect waves-light" ng-click="togglePlanRenovation(project.description)">Plan Project</a>
                                        <a ng-show="renovationProject != 'EMPTY' && renovationProject == project.description " class="btn red darken-2 waves-effect waves-light" ng-click="togglePlanRenovation('EMPTY')">Fininsh Planning</a>
                                        <a class="btn grey darken-2 waves-effect waves-light" ng-click="deleteProject(project.description)">Delete Project</a>
                                        <hr>
                                    </div>
                                </div>
                            </div>
                            <div class="col m2">
                                <a class="btn red darken-2 waves-effect waves-light" ng-click="toggleAddRenovationProject()">Add Project</a>
                            </div>
                        </div>
                        <div class="row" ng-show="addRenovationProject">
                            <h4>Add Renovation Project</h4>
                            <p>Here you can create the new project. To begin adding items to the project click "Plan Project". These will not be recorded in the table.</p>
                            <p>To stop plannning for a project click "Finish Planning".</p>
                            <form ng-submit="addNewRenovationProject(renovationProjectDetails)" enctype="multipart/form-data">
                                <div class="row">
                                    <div class="input-field col m6 offset-m3">
                                        <i class="material-icons prefix">mode_edit</i>
                                        <input type="text" class="validate" ng-model="renovationProjectDetails.description">
                                        <label>Name</label>
                                    </div>
                                </div>
                                <div class="col m1 offset-m8">
                                    <button class="btn red darken-2 waves-effect waves-light" type="sumbit" ng-click="">Add</button>
                                </div>
                            </form>
                        </div>
                        <div class="row">
                            <br>
                        </div>
                        <div class="row">
                            <h4 ng-show="renovationProject == 'EMPTY'">Add Renovation</h4>
                            <h4 ng-show="renovationProject != 'EMPTY'">Add Renovation - {{renovationProject}} Project</h4>
                            <hr>
                            <div class="col m10">
                                <h5>Details</h5>
                            </div>
                            <div class="col m12">
                                <hr>
                            </div>
                        </div>
                        <form ng-show="!planRenovation" ng-submit="addNewRenovation(renovationDetails)" enctype="multipart/form-data">
                            <div class="row">
                                <div class="input-field col m5 offset-m1">
                                    <i class="material-icons prefix">mode_edit</i>
                                    <select id="selectRenovationLabel">
                                        <option value='' disabled selected>Choose your renovation</option>
                                        <option value='Floor Covering'> Floor Covering </option>
                                        <option value='Vinyl'> Vinyl </option>
                                        <option value='Laminated'> Laminated </option>
                                        <option value='Wood'> Wood </option>
                                        <option value='Cemcrete'> Cemcrete </option>
                                        <option value='Screed'> Screed </option>
                                        <option value='Skirting'> Skirting </option>
                                        <option value='Architraves'> Architraves </option>
                                        <option value='Carpets'> Carpets </option>
                                        <option value='Wall Tiling'> Wall Tiling </option>
                                        <option value='Ceilings'> Ceilings </option>
                                        <option value='Cornices'> Cornices </option>
                                        <option value='Roofstructure'> Roofstructure </option>
                                        <option value='Roof Covering'> Roof Covering </option>
                                        <option value='Doors'> Doors </option>
                                        <option value='Locks'> Locks </option>
                                        <option value='Handels'> Handels </option>
                                        <option value='Window Quote'> Window Quote </option>
                                        <option value='Stone'> Stone </option>
                                        <option value='Aliminium'> Aliminium </option>
                                        <option value='Timber'> Timber </option>
                                        <option value='Kitchen and Bics'> Kitchen and Bics </option>
                                        <option value='Light fittings'> Light fittings </option>
                                        <option value='Electrical'> Electrical </option>
                                        <option value='External Work'> External Work </option>
                                        <option value='Pool'> Pool </option>
                                        <option value='Braai'> Braai </option>
                                        <option value='Fireplace'> Fireplace </option>
                                        <option value='External Shower'> External Shower </option>
                                        <option value='Rainwater harvesting'> Rainwater harvesting </option>
                                        <option value='Water storage tanks'> Water storage tanks </option>
                                        <option value='Water storage pumps'> Water storage pumps </option>
                                        <option value='Timber decking'> Timber decking </option>
                                        <option value='Timber screening'> Timber screening </option>
                                        <option value='Pergolas'> Pergolas </option>
                                        <option value='Boma'> Boma </option>
                                        <option value='Garage Doors'> Garage Doors </option>
                                        <option value='Solar power system'> Solar power system </option>
                                        <option value='Battery room and invertors'> Battery room and invertors </option>
                                        <option value='Security System'> Security System </option>
                                        <option value='Gutters'> Gutters </option>
                                        <option value='Screen walls'> Screen walls </option>
                                        <option value='Yard gates'> Yard gates </option>
                                        <option value='Washing lines'> Washing lines </option>
                                        <option value='Landscaping'> Landscaping </option>
                                        <option value='Irrigation'> Irrigation </option>
                                        <option value='Paving'> Paving </option>
                                        <option value='Painting'> Painting </option>
                                        <option value='Internal'> Internal </option>
                                        <option value='External'> External </option>
                                        <option value=''> Miscellaneous </option>
                                        <option value='Bar area'> Bar area </option>
                                        <option value='Wine Cella'> Wine Cellar </option>
                                        <option value='Special staircase'> Special staircase </option>
                                        <option value='Balustrades (Glass - Int. and Ext.)'> Balustrades (Glass - Int. and Ext.) </option>
                                        <option value='Mild steel'> Mild steel </option>
                                        <option value='Aliminium'> Aliminium </option>
                                        <option value='Glass'> Glass </option>
                                    </select>
                                    <label>Renovation</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col m5 offset-m1">
                                    <i class="material-icons prefix">mode_edit</i>
                                    <input type="text" class="validate" ng-model="renovationDetails.supplier">
                                    <label>Supplier</label>
                                </div>
                                <div class="input-field col m2">
                                    <i class="material-icons prefix">mode_edit</i>
                                    <input type="number" class="validate" ng-model="renovationDetails.cost">
                                    <label>Cost</label>
                                </div>
                                <div class="input-field col m2">
                                    <i class="material-icons prefix">mode_edit</i>
                                    <input type="number" class="validate" ng-model="renovationDetails.quantity">
                                    <label>Quantity</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col m5 offset-m1">
                                    <i class="material-icons prefix">mode_edit</i>
                                    <input id="datepickerRenovation" type="date" class="datepicker" ng-model="renovationDetails.invoiceDate">
                                    <label>Invoice Date</label>
                                </div>
                                <div class="file-field input-field col m5">
                                    <div class="btn red darken-2">
                                        <span>Upload Invoice</span>
                                        <input type="file">
                                    </div>
                                    <div class="file-path-wrapper">
                                        <input class="file-path validate" type="text">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col m10">
                                </div>
                                <div class="col m2 s12">
                                    <button class="btn red darken-2 waves-effect waves-light" type="sumbit" ng-click="">Add</button>
                                </div>
                            </div>
                    </div>
                    </form>
                    <form ng-show="planRenovation" ng-submit="addNewRenovationToProject(renovationDetails)" enctype="multipart/form-data">
                        <div class="row">
                            <div class="input-field col m5 offset-m1">
                                <i class="material-icons prefix">mode_edit</i>
                                <select id="selectRenovationLabelProj">
                                    <option value='' disabled selected>Choose your renovation</option>
                                    <option value='FloorCovering'> Floor Covering </option>
                                    <option value='Vinyl'> Vinyl </option>
                                    <option value='Laminated'> Laminated </option>
                                    <option value='Wood'> Wood </option>
                                    <option value='Cemcrete'> Cemcrete </option>
                                    <option value='Screed'> Screed </option>
                                    <option value='Skirting'> Skirting </option>
                                    <option value='Architraves'> Architraves </option>
                                    <option value='Carpets'> Carpets </option>
                                    <option value='Wall Tiling'> Wall Tiling </option>
                                    <option value='Ceilings'> Ceilings </option>
                                    <option value='Cornices'> Cornices </option>
                                    <option value='Roofstructure'> Roofstructure </option>
                                    <option value='Roof Covering'> Roof Covering </option>
                                    <option value='Doors'> Doors </option>
                                    <option value='Locks'> Locks </option>
                                    <option value='Handels'> Handels </option>
                                    <option value='Window Quote'> Window Quote </option>
                                    <option value='Stone'> Stone </option>
                                    <option value='Aliminium'> Aliminium </option>
                                    <option value='Timber'> Timber </option>
                                    <option value='Kitchen and Bics'> Kitchen and Bics </option>
                                    <option value='Light fittings'> Light fittings </option>
                                    <option value='Electrical'> Electrical </option>
                                    <option value='External Work'> External Work </option>
                                    <option value='Pool'> Pool </option>
                                    <option value='Braai'> Braai </option>
                                    <option value='Fireplace'> Fireplace </option>
                                    <option value='External Shower'> External Shower </option>
                                    <option value='Rainwater harvesting'> Rainwater harvesting </option>
                                    <option value='Water storage tanks'> Water storage tanks </option>
                                    <option value='Water storage pumps'> Water storage pumps </option>
                                    <option value='Timber decking'> Timber decking </option>
                                    <option value='Timber screening'> Timber screening </option>
                                    <option value='Pergolas'> Pergolas </option>
                                    <option value='Boma'> Boma </option>
                                    <option value='Garage Doors'> Garage Doors </option>
                                    <option value='Solar power system'> Solar power system </option>
                                    <option value='Battery room and invertors'> Battery room and invertors </option>
                                    <option value='Security System'> Security System </option>
                                    <option value='Gutters'> Gutters </option>
                                    <option value='Screen walls'> Screen walls </option>
                                    <option value='Yard gates'> Yard gates </option>
                                    <option value='Washing lines'> Washing lines </option>
                                    <option value='Landscaping'> Landscaping </option>
                                    <option value='Irrigation'> Irrigation </option>
                                    <option value='Paving'> Paving </option>
                                    <option value='Painting'> Painting </option>
                                    <option value='Internal'> Internal </option>
                                    <option value='External'> External </option>
                                    <option value=''> Miscellaneous </option>
                                    <option value='Bar area'> Bar area </option>
                                    <option value='Wine Cella'> Wine Cellar </option>
                                    <option value='Special staircase'> Special staircase </option>
                                    <option value='Balustrades (Glass - Int. and Ext.)'> Balustrades (Glass - Int. and Ext.) </option>
                                    <option value='Mild steel'> Mild steel </option>
                                    <option value='Aliminium'> Aliminium </option>
                                    <option value='Glass'> Glass </option>
                                </select>
                                <label>Renovation</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col m5 offset-m1">
                                <i class="material-icons prefix">mode_edit</i>
                                <input type="text" class="validate" ng-model="renovationDetails.supplier">
                                <label>Supplier</label>
                            </div>
                            <div class="input-field col m2">
                                <i class="material-icons prefix">mode_edit</i>
                                <input type="number" class="validate" ng-model="renovationDetails.cost">
                                <label>Cost</label>
                            </div>
                            <div class="input-field col m2">
                                <i class="material-icons prefix">mode_edit</i>
                                <input type="number" class="validate" ng-model="renovationDetails.quantity">
                                <label>Quantity</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col m10">
                            </div>
                            <div class="col m2 s12">
                                <button class="btn red darken-2 waves-effect waves-light" type="sumbit" ng-click="">Add</button>
                            </div>
                        </div>
                </div>
                </form>
            </div>
        </div>
        </div>
        <div id="salesCostsTab" class="col m12">
            <div class='container'>
                <div ng-show="!propertyDetails.length">
                    <div class="row">
                        <br>
                        <h4>Selected Property</h4>
                        <hr>
                    </div>
                    <p>You have no properties.</p>
                    <hr>
                </div>
                <div class="row" ng-hide="!propertyDetails.length">
                    <div ng-show="selectedProperty == 'EMPTY'">
                        <div class="row">
                            <br>
                            <h4>Selected Property</h4>
                            <hr>
                        </div>
                        <p>You have not selected a property.</p>
                        <hr>
                    </div>
                    <div ng-hide="selectedProperty == 'EMPTY'">
                        <div ng-show="!saleDetails.length">
                            <div class="row" ng-repeat="propertyDetail in propertyDetails | filter:{ houseNumber: selectedProperty }">
                                <br>
                                <h4>{{propertyDetail.houseNumber}} - Sales</h4>
                                <hr>
                            </div>
                            <p>You have no sales for this property.</p>
                            <hr>
                        </div>
                        <div ng-hide="!saleDetails.length">
                            <!-- Sales table -->
                            <div class="row" ng-repeat="propertyDetail in propertyDetails | filter:{ houseNumber: selectedProperty }">
                                <br>
                                <h4>{{propertyDetail.houseNumber}} - Sales</h4>
                                <hr>
                            </div>
                            <div class="row" ng-repeat="salesDetail in saleDetails | filter:{ propertyID: selectedProperty }">
                                <div class="col m12">
                                    <h5>Agent - {{saleDetail.agentName}}</h5>
                                    <hr>
                                    <p>Contact Number: {{saleDetail.agentContactNumber}}</p>
                                    <p>Contact Email address: {{saleDetail.agentEmailAddress}}</p>
                                    <p>Cost: {{saleDetail.agentCost}}</p>
                                    <p>Invoice Date: {{saleDetail.agentInvoiceDate}}</p>
                                </div>
                                <div class="col m12">
                                    <h5>Attorney - {{saleDetail.attorneyName}}</h5>
                                    <hr>
                                    <p>Cost: {{saleDetail.attorneysCost}}</p>
                                    <p>Invoice Date: {{saleDetail.attorneyInvoiceDate}}</p>
                                </div>
                                <div class="col m12">
                                    <h5>Other Fees</h5>
                                    <hr>
                                    <p>Council<span id="currency-custom">{{saleDetail.council | currency:"R"}}</span></p>
                                    <p>Levies<span id="currency-custom">{{saleDetail.levies | currency:"R"}}</span></p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col m5 offset-m1">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <br>
                        </div>
                        <div ng-show="saleDetails.length < 1" class="row">
                            <h4>Add Sale</h4>
                            <hr>
                            <div class="col m12">
                                <h5>Details</h5>
                                <hr>
                            </div>
                        </div>
                        <form ng-show="saleDetails.length < 1" ng-submit="addNewSale(saleDetails)" enctype="multipart/form-data">
                            <div class="row">
                                <div class="input-field col m5 offset-m1">
                                    <i class="material-icons prefix">mode_edit</i>
                                    <input type="text" maxlength="30" class="validate" ng-model="saleDetails.agentName">
                                    <label>Agent Name</label>
                                </div>
                                <div class="input-field col m5 offset">
                                    <i class="material-icons prefix">mode_edit</i>
                                    <input type="text" maxlength="30" class="validate" ng-model="saleDetails.agentContactNumber">
                                    <label>Agent Contact Number</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col m5 offset-m1">
                                    <i class="material-icons prefix">mode_edit</i>
                                    <input type="text" maxlength="30" class="validate" ng-model="saleDetails.agentEmailAddress">
                                    <label>Agent Email Address</label>
                                </div>
                                <div class="input-field col m2">
                                    <i class="material-icons prefix">mode_edit</i>
                                    <input type="number" class="validate" ng-model="saleDetails.agentCost">
                                    <label>Agent Cost</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col m5 offset-m1">
                                    <i class="material-icons prefix">mode_edit</i>
                                    <input id="datepickerSale" type="date" class="datepicker" ng-model="saleDetails.agentInvoiceDate">
                                    <label>Agent Invoice Date</label>
                                </div>
                                <div class="file-field input-field col m5">
                                    <div class="btn red darken-2">
                                        <span>Upload Invoice</span>
                                        <input type="file">
                                    </div>
                                    <div class="file-path-wrapper">
                                        <input class="file-path validate" type="text">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col m5 offset-m1">
                                    <i class="material-icons prefix">mode_edit</i>
                                    <input type="text" maxlength="30" class="validate" ng-model="saleDetails.attorneyName">
                                    <label>Attorney Name</label>
                                </div>
                                <div class="input-field col m2">
                                    <i class="material-icons prefix">mode_edit</i>
                                    <input type="number" class="validate" ng-model="saleDetails.attorneysCost">
                                    <label>Attorney Cost</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col m5 offset-m1">
                                    <i class="material-icons prefix">mode_edit</i>
                                    <input id="datepickerSale" type="date" class="datepicker" ng-model="saleDetails.attorneyInvoiceDate">
                                    <label>Attorney Invoice Date</label>
                                </div>
                                <div class="file-field input-field col m5">
                                    <div class="btn red darken-2">
                                        <span>Upload Invoice</span>
                                        <input type="file">
                                    </div>
                                    <div class="file-path-wrapper">
                                        <input class="file-path validate" type="text">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col m2 offset-m1">
                                    <i class="material-icons prefix">mode_edit</i>
                                    <input type="number" class="validate" ng-model="saleDetails.council">
                                    <label>Council - 3 Months</label>
                                </div>
                                <div class="input-field col m2">
                                    <i class="material-icons prefix">mode_edit</i>
                                    <input type="number" class="validate" ng-model="saleDetails.levies">
                                    <label>Levies - 3 Months</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col m10">
                                </div>
                                <div class="col m2 s12">
                                    <button class="btn red darken-2 waves-effect waves-light" type="sumbit" ng-click="">Add</button>
                                </div>
                            </div>
                    </div>
                    </form>
                </div>
            </div>
        </div>
        </div>
        <div id="rentalIncomeTab" class="col m12">
        </div>
    </main>
    <footer class="page-footer red darken-2">
        <div class="container">
            <div class="row">
                <div class="col l6 s12">
                    <h5 class="white-text">Property Investor</h5>
                    <p class="grey-text text-lighten-4">Your biggest investment yet. </p>
                </div>
                <div class="col l3 s12">
                    <h5 class="white-text">Links</h5></h5>
                    <ul>
                        <li><a class="white-text" href="#!">Terms and Conditions</a></li>
                        <li><a class="white-text" href="#!">Help</a></li>
                        <li><a class="white-text" href="#!">Main Page</a></li>
                    </ul>
                </div>
                <div class="col l3 s12">
                    <h5 class="white-text">Contact</h5>
                    <ul>
                        <li><a class="white-text" href="#!">Email</a></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-copyright">
            <div class="container">
                Developed by <a class="white-text" href="http://www.unhinged.co.za">Unhinged</a>
            </div>
        </div>
    </footer>
    <!-- Modal Structure -->
    <div id="modalAddRenovationProject" class="modal">
        <div class="modal-content">
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-action modal-close waves-effect waves-red darken-2 btn-flat">Close</a>
        </div>
    </div>
    <script src="../js/materialize.js"></script>
    <script src="../js/init.js"></script>
    <script src="../js/webAppAjax.js"></script>
    <script src="../js/webAppCustoms.js"></script>
    <script src="../js/jquery.validate.js"></script>
    <script src="../js/additional-methods.js"></script>
    <script>
    var app = angular.module("propertyInvestor", []);

    app.controller("propertyController", ["$scope", function($scope) {
        ////////////////////////////////////////////////////////////////////////
        // Variables
        ////////////////////////////////////////////////////////////////////////
        $scope.propertyDetails = [];
        $scope.expenseDetails = [];
        $scope.expenseGroups = [];

        $scope.renovationDetails = [];
        $scope.saleDetails = [];

        $scope.renovationProjectDetails = [];

        $scope.addPropertyForm = false;
        $scope.viewProperty = false;
        $scope.editProperty = false;

        $scope.showAddExpense = false;
        $scope.showEditExpense = false;

        $scope.planRenovation = false;
        $scope.addRenovationProject = false;

        $scope.selectedProperty = "EMPTY";
        $scope.selectedExpense = "EMPTY";
        $scope.renovationProject = "EMPTY";

        $scope.numberOfproperties = 0;
        $scope.numberOfpropertiesCAP = 2;

        ////////////////////////////////////////////////////////////////////////
        // Properties
        ////////////////////////////////////////////////////////////////////////

        $scope.addNewProperty = function(propertyDetails) {
            if ($scope.numberOfproperties == $scope.numberOfpropertiesCAP) {
                swal({
                    title: "Limit Reached",
                    text: "You've reached your maximum number of properties. You can add more properties by upgrading your account",
                    type: "error",
                    confirmButtonText: "Close",
                    confirmButtonColor: "#d32f2f"
                });
                $scope.toggleAddProprty();
                return;
            }

            $scope.propertyDetails.push({
                "houseNumber": propertyDetails.houseNumber,
                "occupant": propertyDetails.occupant,
                "type": propertyDetails.type,
                "houseNumber": propertyDetails.houseNumber,
                "suburb": propertyDetails.suburb,
                "complexName": propertyDetails.complexName,
                "complexNumber": propertyDetails.complexNumber,
                "province": propertyDetails.province,
                "areaPostalCode": propertyDetails.areaPostalCode,
                "standSize": propertyDetails.standSize,
                "standSizeCoverd": propertyDetails.standSizeCoverd,
                "standSizeUncovered": propertyDetails.standSizeUncovered,
                "depositAmount": propertyDetails.depositAmount,
                "bondAmount": propertyDetails.bondAmount,
                "bondRegistration": propertyDetails.bondRegistration,
                "period": propertyDetails.period,
                "interesetRate": propertyDetails.interesetRate,
                "monthlyInstallments": propertyDetails.monthlyInstallments,
                "transferFees": propertyDetails.transferFees,
                "transferDuty": propertyDetails.transferDuty,
                "auctionCost": propertyDetails.auctionCost,
                "purchaseAmount": propertyDetails.purchaseAmount,
                "complexName": propertyDetails.complexName,
                "complexNumber": propertyDetails.complexNumber

            });
            $scope.PD = {};
            $scope.numberOfproperties = $scope.numberOfproperties + 1;
            $("#numberOfpropertiesNavBar").text($scope.numberOfproperties + " Properties");
            $scope.toggleAddProprty();
            swal("Great work!", "You have added a property!", "success")
        };

        $scope.editPropertyF = function() {
            $scope.editProperty = true;
            $scope.viewProperty = false;
        }

        $scope.editPropertyConfirm = function(propertyDetails) {

            var count = 0;

            angular.forEach($scope.propertyDetails, function(selected) {
                if (selected.houseNumber == $scope.selectedProperty) {
                    $scope.propertyDetails[count]["houseNumber"] = propertyDetails.houseNumber;
                    $scope.propertyDetails[count]["occupant"] = propertyDetails.occupant;
                    $scope.propertyDetails[count]["type"] = propertyDetails.type;
                    $scope.propertyDetails[count]["houseNumber"] = propertyDetails.houseNumber;
                    $scope.propertyDetails[count]["complexName"] = propertyDetails.complexName;
                    $scope.propertyDetails[count]["complexNumber"] = propertyDetails.complexNumber;
                    $scope.propertyDetails[count]["suburb"] = propertyDetails.suburb;
                    $scope.propertyDetails[count]["province"] = propertyDetails.province;
                    $scope.propertyDetails[count]["areaPostalCode"] = propertyDetails.areaPostalCode;
                    $scope.propertyDetails[count]["standSize"] = propertyDetails.standSize;
                    $scope.propertyDetails[count]["standSizeCoverd"] = propertyDetails.standSizeCoverd;
                    $scope.propertyDetails[count]["standSizeUncovered"] = propertyDetails.standSizeUncovered;
                    $scope.propertyDetails[count]["depositAmount"] = propertyDetails.depositAmount;
                    $scope.propertyDetails[count]["bondAmount"] = propertyDetails.bondAmount;
                    $scope.propertyDetails[count]["bondRegistration"] = propertyDetails.bondRegistration;
                    $scope.propertyDetails[count]["period"] = propertyDetails.period;
                    $scope.propertyDetails[count]["interesetRate"] = propertyDetails.interesetRate;
                    $scope.propertyDetails[count]["monthlyInstallments"] = propertyDetails.monthlyInstallments;
                    $scope.propertyDetails[count]["transferFees"] = propertyDetails.transferFees;
                    $scope.propertyDetails[count]["transferDuty"] = propertyDetails.transferDuty;
                    $scope.propertyDetails[count]["auctionCost"] = propertyDetails.auctionCost;
                    $scope.propertyDetails[count]["purchaseAmount"] = propertyDetails.purchaseAmount;
                    $scope.propertyDetails[count]["complexName"] = propertyDetails.complexName;
                    $scope.propertyDetails[count]["complexNumber"] = propertyDetails.complexNumber;

                }
                count++;
            });

            $scope.editProperty = false;
            $scope.viewProperty = true;
        }

        $scope.delete = function() {
            swal({
                    title: "Are you sure?",
                    text: "You will not be able to recover this property!",
                    type: "warning",
                    showCancelButton: true,
                    confirmButtonColor: "#DD6B55",
                    confirmButtonText: "Yes, delete it!",
                    closeOnConfirm: false
                },
                function() {
                    var newDataList = [];
                    $scope.selectedAll = false;

                    angular.forEach($scope.propertyDetails, function(selected) {
                        if (selected.houseNumber != $scope.selectedProperty) {
                            newDataList.push(selected);
                        }
                    });
                    $scope.propertyDetails = newDataList;
                    swal("Deleted!", "Your property has been deleted.", "success");
                });
        };


        ////////////////////////////////////////////////////////////////////////
        // Expenes
        ////////////////////////////////////////////////////////////////////////

        $scope.showReccuringExpense = function(expense) {
            return (expense.propertyID == $scope.selectedProperty && expense.occurrence == "Weekly" && expense.original == "1") ||
                (expense.propertyID == $scope.selectedProperty && expense.occurrence == "Monthly" && expense.original == "1");
        };

        $scope.addNewExpense = function(expenseDetails) {

            var expenses = $("#expenseInformationTextarea").val().split("\n");

            //if group exists
            var groupExists = false;
            angular.forEach($scope.expenseGroups, function(selected) {

                if (expenseDetails.groupName + "" == selected.groupName + "") {
                    groupExists = true;
                }
            });

            if (!groupExists) {
                $scope.expenseGroups.push({
                    "propertyID": $scope.selectedProperty,
                    "groupName": expenseDetails.groupName
                });
            }

            for (var count = 0; count < expenses.length; count++) {
                expenseInformation = expenses[count].split(" ");

                $scope.expenseDetails.push({
                    "propertyID": $scope.selectedProperty,
                    "groupName": expenseDetails.groupName,
                    "description": expenseInformation[0].toString(),
                    "cost": expenseInformation[1].toString(),
                    "quantity": expenseInformation[2].toString(),
                    "paidTo": expenseDetails.paidTo,
                    "invoiceNumber": expenseDetails.invoiceNumber,
                    "invoiceDate": $('#datepickerExpense').val()
                });
            }
            $scope.PD = {};


            swal("Great work!", "You have added an expense for this property!", "success");
            $scope.showAddExpense = false;
        };

        $scope.deleteExpense = function() {

            var expenseToDelete = "";
            angular.forEach($scope.expenseDetails, function(selected) {

                if ($("#" + selected.description + "radio").is(':checked')) {
                    expenseToDelete = selected;
                }
            });

            if (expenseToDelete != "") {
                swal({
                        title: "Are you sure?",
                        text: "You will not be able to recover this expense!",
                        type: "warning",
                        showCancelButton: true,
                        confirmButtonColor: "#DD6B55",
                        confirmButtonText: "Yes, delete it!",
                        closeOnConfirm: false
                    },
                    function() {
                        var newDataList = [];

                        $scope.selectedAll = false;

                        angular.forEach($scope.expenseDetails, function(selected) {
                            if (selected != expenseToDelete) {

                                newDataList.push(selected);
                            }
                        });
                        $scope.expenseDetails = newDataList;
                        $scope.$apply();
                        swal("Deleted!", "Your expense has been deleted.", "success");
                    });
            } else {
                swal({
                    title: "Error",
                    text: "Please select an expense to delete.",
                    type: "error",
                    confirmButtonText: "Close",
                    confirmButtonColor: "#d32f2f"
                });

            }

        };

        $scope.editExpense = function(expenseDetails) {
                        var newDataList = [];

            angular.forEach($scope.expenseDetails, function(selected) {
                if (selected != $scope.selectedExpense) {

                    newDataList.push(selected);
                }
            });
            $scope.expenseDetails = newDataList;

            //if group exists
            var groupExists = false;
            angular.forEach($scope.expenseGroups, function(selected) {

                if (expenseDetails.groupName + "" == selected.groupName + "") {
                    groupExists = true;
                }
            });

            if (!groupExists) {
                $scope.expenseGroups.push({
                    "propertyID": $scope.selectedProperty,
                    "groupName": expenseDetails.groupName
                });
            }

            $scope.expenseDetails.push({
                "propertyID": $scope.selectedProperty,
                "groupName": $("#editExpenseGroupName").val(),
                "description":      $("#editExpenseDescription").val(),
                "cost": $("#editExpenseCost").val(),
                "quantity":  $("#editExpenseQuantity").val(),
                "paidTo":  $("#editExpensePaidTo").val(),
                "invoiceNumber": expenseDetails.invoiceNumber,
                "invoiceDate": $("#editExpenseInvoiceDate").val()
            });
            $scope.PD = {};


            swal("Great work!", "You have edited this expense!", "success");
            $scope.showEditExpense = false;
            $("#editExpenseGroupName").val("");
                $("#editExpensePaidTo").val("");
                $("#editExpenseDescription").val("");
                $("#editExpenseCost").val("");
                $("#editExpenseQuantity").val("");
                $("#editExpenseInvoiceDate").val("");
        }

        $scope.selectExpenseToEdit = function() {
            var expenseToEdit = "";
            angular.forEach($scope.expenseDetails, function(selected) {

                if ($("#" + selected.description + "radio").is(':checked')) {
                    expenseToEdit = selected;
                }
            });
            if (expenseToEdit != "") {
                $scope.selectedExpense = expenseToEdit;

                $("#editExpenseGroupName").val($scope.selectedExpense.groupName);
                $("#editExpensePaidTo").val($scope.selectedExpense.paidTo);
                $("#editExpenseDescription").val($scope.selectedExpense.description);
                $("#editExpenseCost").val($scope.selectedExpense.cost);
                $("#editExpenseQuantity").val($scope.selectedExpense.quantity);
                $("#editExpenseInvoiceDate").val($scope.selectedExpense.invoiceDate);

                $scope.toggleEditxpense();
                Materialize.updateTextFields();


            } else {
                swal({
                    title: "Error",
                    text: "Please select an expense to Edit.",
                    type: "error",
                    confirmButtonText: "Close",
                    confirmButtonColor: "#d32f2f"
                });

            }

        };

        $scope.repeatExpense = function() {
            var expenseToRepeat = "";
            angular.forEach($scope.expenseDetails, function(selected) {

                if ($("#" + selected.description + "radio").is(':checked')) {
                    expenseToRepeat = selected;
                }
            });

            if (expenseToRepeat != "") {
                $scope.selectedExpense = expenseToRepeat;

                swal({
                        title: "Notice",
                        text: "Do you want to upload an invoice?",
                        type: "success",
                        showCancelButton: true,
                        confirmButtonColor: "#DD6B55",
                        confirmButtonText: "No",
                        cancelButtonText: "Yes",
                        closeOnConfirm: false,
                        closeOnCancel: false
                    },
                    function(isConfirm) {
                        if (isConfirm) {
                            $scope.expenseDetails.push({
                                "propertyID": $scope.selectedProperty,
                                "groupName": $scope.selectedExpense.groupName,
                                "description": $scope.selectedExpense.description,
                                "cost": $scope.selectedExpense.cost,
                                "quantity": $scope.selectedExpense.quantity,
                                "paidTo": $scope.selectedExpense.paidTo,
                                "invoiceDate": "",

                            });
                            $scope.PD = {};
                            $scope.$apply();
                            swal("Great work!", "This expense has been tracked", "success")

                        } else {
                            $scope.expenseDetails.push({
                                "propertyID": $scope.selectedProperty,
                                "groupName": $scope.selectedExpense.groupName,
                                "description": $scope.selectedExpense.description,
                                "cost": $scope.selectedExpense.cost,
                                "quantity": $scope.selectedExpense.quantity,
                                "paidTo": $scope.selectedExpense.paidTo,
                                "invoiceDate": $scope.selectedExpense.invoiceDate,

                            });
                            $scope.PD = {};
                            $scope.$apply();

                            swal("Great work!", "Todo Fix", "success")
                        }
                    });

            } else {
                swal({
                    title: "Error",
                    text: "Please select an expense to Edit.",
                    type: "error",
                    confirmButtonText: "Close",
                    confirmButtonColor: "#d32f2f"
                });

            }

        };



        $scope.getTotalExpenseCost = function(groupName) {
            var total = 0;

            if (groupName == "") {
                angular.forEach($scope.expenseDetails, function(selected) {
                    total += selected.cost * selected.quantity;
                });


            } else {
                angular.forEach($scope.expenseDetails, function(selected) {
                    if (selected.groupName == groupName) {
                        total += selected.cost * selected.quantity;
                    }

                });
            }

            return total;

        };

        $scope.track = function(description, cost, occurrence, paidTo) {

            swal({
                    title: "Notice",
                    text: "Do you want to upload an invoice?",
                    type: "success",
                    showCancelButton: true,
                    confirmButtonColor: "#DD6B55",
                    confirmButtonText: "No",
                    cancelButtonText: "Yes",
                    closeOnConfirm: false,
                    closeOnCancel: false
                },
                function(isConfirm) {
                    if (isConfirm) {
                        $scope.expenseDetails.push({
                            "propertyID": $scope.selectedProperty,
                            "description": description,
                            "cost": cost,
                            "quantity": "1",
                            "occurrence": occurrence,
                            "paidTo": paidTo,
                            "invoiceDate": "29-05-2017",
                            "original": "0"

                        });
                        $scope.PD = {};
                        $scope.$apply();
                        swal("Great work!", "This expense has been tracked", "success")

                    } else {

                        swal("Great work!", "Todo Fix", "success")
                    }
                });
        }

        ////////////////////////////////////////////////////////////////////////
        // Renovations
        ////////////////////////////////////////////////////////////////////////

        $scope.showrenovationsForProjects = function(renovation, project) {
            alert(project);
            return (renovation.propertyID == $scope.selectedProperty && renovation.project == project);
        };

        $scope.showrenovations = function(renovation) {
            return (renovation.propertyID == $scope.selectedProperty && renovation.project == "No Project");
        };

        $scope.addNewRenovation = function(renovationDetails) {

            $scope.renovationDetails.push({
                "propertyID": $scope.selectedProperty,
                "description": $('#selectRenovationLabel').find(":selected").text(),
                "project": "No Project",
                "cost": renovationDetails.cost,
                "quantity": renovationDetails.quantity,
                "supplier": renovationDetails.supplier,
                "invoiceDate": $('#datepickerRenovation').val(),
                "plan": "0"

            });
            $scope.PD = {};


            swal("Great work!", "You have added an renovation for this property!", "success")
        };

        $scope.addNewRenovationToProject = function(renovationDetails) {

            $scope.renovationDetails.push({
                "propertyID": $scope.selectedProperty,
                "description": $('#selectRenovationLabelProj').find(":selected").text(),
                "project": $scope.renovationProject,
                "cost": renovationDetails.cost,
                "quantity": renovationDetails.quantity,
                "supplier": renovationDetails.supplier,
                "plan": "1"

            });
            $scope.PD = {};


            swal("Great work!", "You have added an renovation for this property!", "success")
        };

        $scope.deleteProject = function(projectToDelete) {
            swal({
                    title: "Are you sure?",
                    text: "You will not be able to recover this project!",
                    type: "warning",
                    showCancelButton: true,
                    confirmButtonColor: "#DD6B55",
                    confirmButtonText: "Yes, delete it!",
                    closeOnConfirm: false
                },
                function() {
                    var newDataList = [];
                    $scope.selectedAll = false;

                    angular.forEach($scope.renovationProjectDetails, function(selected) {
                        if (selected.propertyID != $scope.selectedProperty && selected.description != projectToDelete) {
                            newDataList.push(selected);
                        }
                    });
                    $scope.renovationProjectDetails = newDataList;

                    $scope.$apply();
                    swal("Deleted!", "Your project has been deleted.", "success");
                });
        };

        $scope.deleteRenovation = function() {

            var renovationToDelete = "";
            angular.forEach($scope.renovationDetails, function(selected) {

                if ($("#" + selected.description + "radio").is(':checked')) {
                    renovationToDelete = selected.description;
                }
            });

            if (renovationToDelete != "") {
                swal({
                        title: "Are you sure?",
                        text: "You will not be able to recover this renovation!",
                        type: "warning",
                        showCancelButton: true,
                        confirmButtonColor: "#DD6B55",
                        confirmButtonText: "Yes, delete it!",
                        closeOnConfirm: false
                    },
                    function() {
                        var newDataList = [];

                        $scope.selectedAll = false;

                        angular.forEach($scope.renovationDetails, function(selected) {
                            if (selected.description != renovationToDelete) {
                                newDataList.push(selected);
                            }
                        });
                        $scope.renovationDetails = newDataList;
                        swal("Deleted!", "Your renovation has been deleted.", "success");
                        $scope.$apply();

                    });
            } else {
                swal({
                    title: "Error",
                    text: "Please select an renovation to delete.",
                    type: "error",
                    confirmButtonText: "Close",
                    confirmButtonColor: "#d32f2f"
                });

            }

        };

        $scope.addNewRenovationProject = function(renovationProjectDetail) {

            $scope.renovationProjectDetails.push({
                "propertyID": $scope.selectedProperty,
                "description": renovationProjectDetail.description
            });
            $scope.PD = {};
            swal("Great work!", "You have added an new project for this property!", "success")
            $('select').material_select();
            $scope.addRenovationProject = false;

        };

        ////////////////////////////////////////////////////////////////////////
        // Sales
        ////////////////////////////////////////////////////////////////////////
        $scope.addNewSale = function(saleDetails) {

            $scope.saleDetails.push({
                "propertyID": $scope.selectedProperty,
                "agentName": saleDetails.agentName,
                "agentContactNumber": saleDetails.agentContactNumber,
                "agentEmailAddress": saleDetails.agentEmailAddress,
                "agentCost": saleDetails.agentCost,
                "agentInvoiceDate": saleDetails.agentInvoiceDate,
                "attorneyName": saleDetails.attorneyName,
                "attorneysCost": saleDetails.attorneysCost,
                "attorneyInvoiceDate": saleDetails.attorneyInvoiceDate,
                "council": saleDetails.council,
                "levies": saleDetails.levies
            });
            $scope.PD = {};

            swal("Great work!", "You have added an sale for this property!", "success")
        };

        $scope.deleteSale = function() {

            var saleToDelete = "";
            angular.forEach($scope.saleDetails, function(selected) {

                if ($("#" + selected.description + "radio").is(':checked')) {
                    saleToDelete = selected.description;
                }
            });
            if (saleToDelete != "") {
                swal({
                        title: "Are you sure?",
                        text: "You will not be able to recover this sale!",
                        type: "warning",
                        showCancelButton: true,
                        confirmButtonColor: "#DD6B55",
                        confirmButtonText: "Yes, delete it!",
                        closeOnConfirm: false
                    },
                    function() {
                        var newDataList = [];

                        $scope.selectedAll = false;

                        angular.forEach($scope.saleDetails, function(selected) {
                            if (selected.description != saleToDelete) {

                                newDataList.push(selected);
                            }
                        });
                        $scope.saleDetails = newDataList;
                        $scope.$apply();
                        swal("Deleted!", "Your sale has been deleted.", "success");
                    });
            } else {
                swal({
                    title: "Error",
                    text: "Please select an sale to delete.",
                    type: "error",
                    confirmButtonText: "Close",
                    confirmButtonColor: "#d32f2f"
                });

            }

        };

        ////////////////////////////////////////////////////////////////////////
        // Rental
        ////////////////////////////////////////////////////////////////////////


        ////////////////////////////////////////////////////////////////////////
        // Toggles
        ////////////////////////////////////////////////////////////////////////

        $scope.toggleAddProprty = function() {
            $('ul.tabs').tabs('select_tab', 'propertyInformationTab');
            $scope.addPropertyForm = !$scope.addPropertyForm;
        };

        $scope.toggleEditProprty = function() {
            $scope.editProperty = !$scope.editProperty;
            $scope.viewProperty = !$scope.viewProperty;
        };

        $scope.toggleViewProperty = function() {
            $scope.viewProperty = !$scope.viewProperty;
        };

        $scope.selectPropertyToView = function(selectedProperty) {
            if ($scope.addPropertyForm) {
                $scope.toggleAddProprty();
            }
            $scope.selectedProperty = selectedProperty;
            $scope.toggleViewProperty();
        };

        $scope.togglePlanRenovation = function(renovationProjectLabel) {
            $scope.renovationProject = renovationProjectLabel + "";
            $scope.planRenovation = !$scope.planRenovation;
        };


        $scope.toggleAddRenovationProject = function() {

            $scope.addRenovationProject = !$scope.addRenovationProject;
        };

        $scope.toggleAddExpense = function() {

            $scope.showAddExpense = !$scope.showAddExpense;
        };


        $scope.toggleEditxpense = function() {

            $scope.showEditExpense = !$scope.showEditExpense;
        };




    }]);


    app.directive('format', ['$filter', function($filter) {
        return {
            require: '?ngModel',
            link: function(scope, elem, attrs, ctrl) {
                if (!ctrl) return;

                ctrl.$formatters.unshift(function(a) {
                    return $filter(attrs.format)(ctrl.$modelValue)
                });

                elem.bind('blur', function(event) {
                    var plainNumber = elem.val().replace(/[^\d|\-+|\.+]/g, '');
                    elem.val($filter(attrs.format)(plainNumber));
                });
            }
        };
    }]);

    function insertQuickExpenses() {
        $("#expenseInformationTextarea").val("");

        var expenses = "";

        for (var i = 1; i <= 6; i++) {
            if ($("#expenseCheckBox" + i).is(':checked')) {
                expenses += "" + $("#expenseCheckBox" + i).val() + " 100.00 1\n";
            }
        }

        expenses = expenses.substring(0, expenses.length - 1);

        $("#expenseInformationTextarea").val(expenses);
        $("#expenseInformationLabel").addClass("active");
        $('#expenseInformationTextarea').trigger('autoresize');
    }
    </script>
</body>

</html>
